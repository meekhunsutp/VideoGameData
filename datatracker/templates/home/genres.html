{% extends 'base.html' %}

{% block chart_header %}
<h1 style="text-align: center">Genre Sales By Region</h1>
{% endblock %}

{% block chart %}
<div class="ct-chart ct-perfect-fourth" style="width:100%; height:auto;"></div>
 <script>
    class MyCharts{
        constructor(xData, yData)
        {
            this.xData = xData;
            this.yData = yData;

        }
        createGraph()
        {
            var data =
            {
                labels: this.xData,
                series:  this.yData
            }
            new Chartist.Bar('.ct-chart', data);
        }

    }
    var xData = ['2013', '2014', '2015', '2016'];
    var yData = [[683.35, 376.85, 135, 134.97],[447.05, 201.63, 131, 51.59],[359.42, 238.39, 57, 77.27],
            [327.28, 188.06, 352, 59.61],[123.78, 50.78, 57, 12.55],[410.24, 215.98, 108, 75.32],[582.6, 313.27, 38, 102.69],
            [183.31, 113.38, 64, 31.52],[877.83, 525.0, 160, 187.38],[223.59, 101.32, 87, 36.68],[105.8, 64.13, 52, 16.81],
            [68.7, 45.34, 49, 11.36]];

    var labels =[];
    {% for item in header %}
    labels.push('{{ item }}');
    {% endfor %}

    var series = [];
    {% for item in series %}
    series.push({{ item }});
    {% endfor %}

    var obj = new MyCharts(labels, series);
    obj.createGraph();

  </script>
{% endblock %}

{% block table_header %}
<h1 style="text-align: center">Genre List</h1>
{% endblock %}
{% block table %}
        <div class="table-responsive">
          <table class="table table-striped table-sm">
            <thead>
              <tr>
                {% for header in headings %}
                <th>{{ header }}</th>
                {% endfor %}
              </tr>
            </thead>
            <tbody>
              {% for item in data %}
              <tr>
                 <td>{{ item.genre }}</td>
                  <td>{{ item.naSales }}</td>
                  <td>{{ item.euSales }}</td>
                  <td>{{ item.jpSales }}</td>
                  <td>{{ item.otherSales }}</td>
                  <td>{{ item.globalSales }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
{% endblock %}